<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        table {
            width: 300px;
            margin: 200px auto;
            text-align: center;
            border-collapse: collapse;
            border: 1px solid red;
        }

        table thead {
            background: skyblue;
        }

        table tbody {
            background: #ccc;
        }

        table td,
        table,
        th {
            border: 1px solid red;
        }
    </style>
</head>

<body>
    <table>
        <thead>
            <tr>
                <th><input type="checkbox" id="quanxuan"></th>
                <th>商品</th>
                <th>价钱</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><input type="checkbox"></td>
                <td>iphone8</td>
                <td>8000</td>
            </tr>
            <tr>
                <td><input type="checkbox"></td>
                <td>iphone8</td>
                <td>8000</td>
            </tr>
            <tr>
                <td><input type="checkbox"></td>
                <td>iphone8</td>
                <td>8000</td>
            </tr>
            <tr>
                <td><input type="checkbox"></td>
                <td>iphone8</td>
                <td>8000</td>
            </tr>
        </tbody>
    </table>
    <script>
        var tr = document.querySelector('tbody').querySelectorAll('tr')
        for (var i = 0; i < tr.length; i++) {
            tr[i].onmouseover = function () {
                this.style.background = 'white'
            }
            tr[i].onmouseout = function () {
                this.style.background = '#ccc'
            }
        }
        // 1.全选和取消全选的做法：让下面的所有复选框的checked属性跟随全选按钮即可
        var quanxuan = document.getElementById('quanxuan')
        var xiao = document.querySelector('tbody').querySelectorAll('input')
        quanxuan.onclick = function () {
            //   this.checked返回值是一个布尔值 ture或false
            for (var i = 0; i < xiao.length; i++) {
                xiao[i].checked = this.checked//记住这里的用法(重点)
            }
        }
        // 2.下面复选框需要全部选中，上面全选才能选中做法：给下面所有复选框绑定点击事件，每次点击都要循环查看下面所有的复选框是否有没有选中的，如果有一个没选中的，上面全选就不选中
        for (var i = 0; i < xiao.length; i++) {

            xiao[i].onclick = function () {
                var flag = true;//这个方法一般用于判断某个事件是否全部符合要求
                for (var j = 0; j < xiao.length; j++) {
                    if (xiao[j].checked != flag) {
                        flag = false;
                        break;//提高执行效率，一个不满足就立马退出循环
                    }
                }
                quanxuan.checked = flag;
            }
        }
    </script>
</body>

</html>